[mgr]
ratio = [1,2,3]
show_hidden = true
show_symlink = true
title_format = "yazi"

[preview]
wrap = "yes"
max_width = 3000
max_height = 3000

[opener]
quicklook = [
	{ run = 'qlmanage -p "$@" >/dev/null 2>/dev/null', orphan = true, for = "macos", desc = "open using the MacOS Quicklook" },
]
glow = [
	{ run = 'glow -p "$@"', block = true, orphan = false, for = "macos", desc = "open using glow" },
]
skim = [
	{ run = 'open -a Skim "$@"', block = false, orphan = true, for = "macos", desc = "open using SkimPDF" },
]

[open]
prepend_rules = [
  # { mime = "{image,audio,video}/*", use = "quicklook"},
  # { name = "*.json", use = "edit" },
	# { name = "*.html", use = [ "open", "edit" ] },
	{ name = "*.jpg", use = "quicklook" },
	{ name = "*.jpeg", use = "quicklook" },
	{ name = "*.png", use = "quicklook" },
	{ name = "*.heic", use = "quicklook" },
	{ name = "*.pdf", use = [ "quicklook" , "skim" ] },
	{ name = "*.mp3", use = "quicklook" },
	{ name = "*.wav", use = "quicklook" },
	{ name = "*.key", use = [ "quicklook", "open" ] },
	{ name = "*.pages", use = [ "quicklook", "open" ] },
	{ name = "*.doc", use = [ "quicklook", "open" ] },
	{ name = "*.docx", use = [ "quicklook", "open" ] },

	{ name = "*.md", use = [ "edit", "glow" ] },
]
# append_rules = [
# 	{ name = "*", use = [ "edit" ,"quicklook" ] },
# ]



[plugin]
prepend_previewers = [
	# Archive previewer
	{ mime = "application/*zip",            run = "ouch" },
	{ mime = "application/x-tar",           run = "ouch" },
	{ mime = "application/x-bzip2",         run = "ouch" },
	{ mime = "application/x-7z-compressed", run = "ouch" },
	{ mime = "application/x-rar",           run = "ouch" },
	{ mime = "application/x-xz",            run = "ouch" },
	# mediainfo
  { mime = "{image,audio,video}/*", run = "mediainfo"},
  { mime = "application/subrip", run = "mediainfo"},

	# not working??
  # { mime = "application/octet-stream", run = "hexyl"},

	# Markdown
  { name = "*.md*", run = "glow" },
  # { name = "*.md", run = "mdcat" },

	# Rich (slow, dont use for md or code)
  { name = "*.csv*", run = "rich-preview"}, # for csv files
  # { name = "*.md", run = "rich-preview" }, # for markdown (.md) files
  { name = "*.rst*", run = "rich-preview"}, # for restructured text (.rst) files
  { name = "*.ipynb*", run = "rich-preview"}, # for jupyter notebooks (.ipynb)
  # { name = "*.json*", run = "rich-preview"}, # for json (.json) files
]

append_previewers = [
	# Binary previewer
  # { mime = "text/*", run = "code"},
  { name = "*", run = "hexyl" },
]

# git status iconc for files
[[plugin.prepend_fetchers]]
id   = "git"
name = "*"
run  = "git"

# git status iconc for directories
[[plugin.prepend_fetchers]]
id   = "git"
name = "*/"
run  = "git"

# [[plugin.prepend_fetchers]]
# id   = "git"
# name = "*/"
# run  = "git"

# [[plugin.prepend_fetchers]]
# id   = "mime"
# name = "*"
# run  = "mime-ext"
# prio = "high"
